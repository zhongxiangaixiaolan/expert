# 3D照片轮播组件实现指南

## 概述
本文档提供了一个完整的3D照片轮播组件实现方案，具有中间照片悬浮突出效果、非循环翻页、独立照片定位等特性。

## 核心特性
- 🎯 中间照片1.2倍放大 + 悬浮阴影效果
- 🔄 非循环翻页（到边界时停止，按钮禁用）
- 📐 每张照片独立定位，不连在一起滑动
- 🎨 3D透视效果，带轻微Y轴旋转
- 📱 响应式设计，适配不同屏幕尺寸

## AI提示词模板

```
请帮我创建一个Vue 3 + TypeScript的3D照片轮播组件，具体要求如下：

### 核心功能要求：
1. **独立照片定位**：每张照片使用绝对定位独立控制，不要使用轨道整体移动
2. **中间照片突出效果**：当前激活照片放大1.2倍，向前突出（translateZ: 40px），增强阴影
3. **非循环翻页**：到第一张时左箭头禁用，到最后一张时右箭头禁用，不循环
4. **3D视觉效果**：使用perspective: 1200px，非激活照片轻微Y轴旋转

### 技术实现细节：
1. **照片定位算法**：
   - 使用固定像素间距（160px）而非百分比
   - 计算公式：translateX = position * 160px
   - 居中定位：left: 50%, top: 50%, 负margin居中

2. **尺寸规格**：
   - 基础尺寸：180px × 240px（3:4比例）
   - 容器高度：400px（确保放大后不被裁剪）
   - 移动端适配：150px × 200px

3. **变换效果**：
   - 激活照片：scale(1.2) translateZ(40px)
   - 非激活照片：scale(0.85) translateZ(-60px) rotateY(±10deg)
   - 阴影：激活照片使用更强阴影效果

4. **控制逻辑**：
   - 左箭头禁用条件：activeIndex === 0
   - 右箭头禁用条件：activeIndex === photos.length - 1
   - 支持拖拽、键盘、点击切换

### 样式要求：
- 使用transform-style: preserve-3d
- 平滑过渡：transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94)
- 照片框架：圆角16px，白色边框，渐变阴影
- 响应式断点：768px和480px

### 组件接口：
```typescript
interface Props {
  photos: Photo[];
  autoPlay?: boolean;
  interval?: number;
  width?: string;
  height?: string;
}

interface Photo {
  id?: number;
  photoName: string;
  photoTitle?: string;
  photoDescription?: string;
  sortOrder?: number;
}
```

请确保每张照片独立移动，中间照片有明显的悬浮突出效果，边界处正确禁用控制按钮。
```

## 关键代码片段

### 1. 照片定位核心算法
```javascript
const getCardStyle = (index: number) => {
  const diff = index - activeIndex.value;
  const position = diff; // 直接位置差，不循环

  // 关键：使用固定像素间距
  const cardSpacing = 160;
  const translateX = position * cardSpacing;
  const scale = position === 0 ? 1.2 : 0.85;
  const rotateY = position * 10;
  const translateZ = position === 0 ? 40 : -60;

  return {
    transform: `translateX(${translateX}px) scale(${scale}) rotateY(${rotateY}deg) translateZ(${translateZ}px)`,
    opacity: Math.abs(position) > 2 ? 0 : Math.abs(position) > 1 ? 0.6 : 1,
    zIndex: position === 0 ? 10 : 10 - Math.abs(position),
  };
};
```

### 2. 非循环翻页逻辑
```javascript
const prevPhoto = () => {
  if (activeIndex.value > 0) {
    setActiveIndex(activeIndex.value - 1);
  }
};

const nextPhoto = () => {
  if (activeIndex.value < props.photos.length - 1) {
    setActiveIndex(activeIndex.value + 1);
  }
};
```

### 3. 控制按钮状态
```vue
<button
  class="control-btn prev-btn"
  @click="prevPhoto"
  :disabled="activeIndex === 0"
>
  <el-icon><ArrowLeft /></el-icon>
</button>
<button
  class="control-btn next-btn"
  @click="nextPhoto"
  :disabled="activeIndex === photos.length - 1"
>
  <el-icon><ArrowRight /></el-icon>
</button>
```

### 4. 关键CSS样式
```css
.photo-carousel-3d {
  perspective: 1200px;
  overflow: hidden;
}

.carousel-card {
  position: absolute;
  width: 180px;
  height: 240px;
  left: 50%;
  top: 50%;
  margin-left: -90px;
  margin-top: -120px;
  transform-style: preserve-3d;
  transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.carousel-card.card-active .photo-frame {
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.25), 0 8px 24px rgba(0, 0, 0, 0.15);
}
```

## 常见问题解决

### Q1: 照片连在一起滑动怎么办？
**A**: 不要使用轨道整体变换，改为每张照片独立定位：
- 移除 `transform: translateX(${offset}%)` 的轨道变换
- 使用固定像素间距计算每张照片位置
- 确保每张照片都是 `position: absolute`

### Q2: 中间照片被容器裁剪？
**A**: 调整容器高度和照片尺寸：
- 容器高度至少400px
- 使用固定像素尺寸而非百分比
- 确保放大后的照片不超出容器

### Q3: 响应式适配问题？
**A**: 使用媒体查询调整尺寸：
```css
@media (max-width: 768px) {
  .carousel-card {
    width: 150px;
    height: 200px;
    margin-left: -75px;
    margin-top: -100px;
  }
}
```

## 效果预期
实现后应该看到：
- 中间照片明显比两侧大，有悬浮感
- 点击箭头时照片一张一张独立移动
- 到边界时对应箭头变灰禁用
- 整体有3D立体视觉效果
- 在不同设备上都能正常显示

## 扩展功能
可以在此基础上添加：
- 自动播放功能
- 触摸滑动支持
- 照片预加载
- 懒加载优化
- 自定义过渡动画
- 照片标题和描述显示
